[2022-07-12(화) TIL]
현재 내가 진행하고 있는 프로젝트는 네이버 클라우드를 사용하여 NCP 로드 밸런서를 사용한다. 팀장님께서 로드밸런스 어쩌고 하셨는데 미루고 미루다 지금 알아보고자 한다.

`Load balancing`은 들어오는 네트워크 트래픽을 효과적으로 분산시켜준다. 수천 수만대의 컴퓨터가 동시에 한 서비스에 접속한다면 네트워크는 당연히 과부하가 걸릴 것이다. 증가한 트래픽에 대처할 수 있는 방법은 크게 두 가지이다.


- Scale-up
    - 서버 자체의 성능을 확장
    - 비유하자면 CPU i3 → i7 으로 업그레이드
- Scale-out
    - 서버를 두 대 이상 증설하여 운영
    - 이 때 사용하는 것이 `Load balancing`

주요 기능은 다음과 같다.

- NAT(Network Address Translation)
    - 사설 IP 주소를 공인 IP 주소로 바꿀 때 사용하는 통신망의 주소 변조기
- Tunneling
    - 눈에 보이지 않는 통로를 만들어 통신
    - 데이터를 캡슐화해서 연결된 상호 간에만 캡슐화된 패킷을 구별해 캡슐화 해제 가능
- DSR(Dynamic Source Routing protocol)
    - 로드 밸런서 사용 시 서버에서 클라이언트로 되돌아가는 경우 목적지 주소를 스위치 IP 주소가 아닌 클라이언트의 IP 주소로 전달해서 네트워크 스위치를 거치지 않고 바로 클라이언트로 찾아감
    

이중화된 Load Balancer들은 서로 Health Check를 통해서, Main Load Balancer가 동작하지 않으면 가상 IP는 여분의 Load Balancer로 변경된다.
예를 들어, 1번 서버가 동작하지 않으면 2번 서버가 운영되는 개념이다.

오늘은 로드 밸런싱에 대해 더 깊게 파고들어가지는 않겠다.

